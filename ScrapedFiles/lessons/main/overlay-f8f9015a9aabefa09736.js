(()=>{"use strict";(()=>{var e=(e=>(e[e.String=0]="String",e[e.Number=1]="Number",e[e.Boolean=2]="Boolean",e[e.Unknown=3]="Unknown",e[e.Bigint=4]="Bigint",e[e.Object=5]="Object",e[e.Array=6]="Array",e[e.Tuple=7]="Tuple",e[e.Literal=8]="Literal",e[e.Union=9]="Union",e[e.Intersection=10]="Intersection",e[e.Date=11]="Date",e[e.Reference=12]="Reference",e))(e||{}),t=(e=>(e[e.Property=0]="Property",e[e.IndexSignature=1]="IndexSignature",e))(t||{}),n=(e=>(e[e.Optional=1]="Optional",e[e.Variable=2]="Variable",e))(n||{});class r extends Error{}function a(e,t,n){return new r(`Expected ${e} to be ${t}, got ${n}`)}function o(o,s){if(null==s)throw new Error("Please ensure that the ts-safe-cast transformer is run.");return function o(i,c,l){switch(c){case e.String:return"string"==typeof i?void 0:a(l,"a string",i);case e.Number:return"number"==typeof i?void 0:a(l,"a number",i);case e.Boolean:return"boolean"==typeof i?void 0:a(l,"a boolean",i);case e.Unknown:return;case e.Bigint:return"bigint"==typeof i?void 0:a(l,"a bigint",i);case e.Date:return i instanceof Date?void 0:a(l,"a date",i)}switch(c[0]){case e.Object:{if(!i||"object"!=typeof i)return a(l,"an object",i);let e=i;const[n,...r]=c;for(const n of r)switch(n[0]){case t.Property:const r=n[1],s=`${l}.${r}`;if(!(r in e)){if(n[3])break;return a(s,"defined","undefined")}const i=o(e[r],n[2],s);if(i)return i;break;case t.IndexSignature:for(const t in e){const r=o(e[t],n[1],`${l}.${t}`);if(r)return r}}return}case e.Array:if(!Array.isArray(i))return a(l,"an array",i);for(let e=0;e<i.length;++e){const t=o(i[e],c[1],`${l}.${e}`);if(t)return t}return;case e.Tuple:{const[e,...t]=c;if(!Array.isArray(i))return a(l,"a tuple",i);let r=0,s=0;for(const[e,a]of t)if(a)for(;s<i.length;){const t=o(i[s],e,`${l}.${s}`);if(t||++s,t||a===n.Optional)break}else for(;;){const t=o(i[r],e,`${l}.${r}`);if(++r,!t){r>=s&&(s=r);break}if(r>s)return t}return s<i.length?a(l,"a tuple",i):void 0}case e.Literal:return i===c[1]?void 0:a(l,`${c[1]}`,i);case e.Union:{const[e,...t]=c,n=[];for(const e of t){const t=o(i,e,l);if(!t)return;n.push(t)}return new r(`Expected ${l} to be a union, but no branches matched: ${n.map((e=>`\n\tâ€¢ ${e}`)).join("")}`)}case e.Intersection:{const[e,...t]=c;for(const e of t){const t=o(i,e,l);if(t)return t}return}case e.Reference:{const[e,...t]=c;let n=s;for(let e=0;e<t.length;++e)n=n[t[e]];return o(i,n,l)}}}(o,s,"root")}function s(e,t){return!o(e,t)}function i(e,t){const n=o(e,t);if(n)throw n;return e}const c=(e,t)=>e.host.endsWith(i("gumroad.com",0))||"gum.co"===e.host||t&&e.host.endsWith(t),l=document.querySelector("script[src*='/js/gumroad.js']"),d=l?new URL(l.src).host:void 0,u=document.createElement("div");u.className="overlay",u.style.display="none";const f=document.createElement("button");f.classList.add("close-button"),f.innerHTML='<span class="icon icon-x"></span>',u.appendChild(f);const p=document.createElement("iframe");u.appendChild(p);const h=document.createElement("div");h.setAttribute("role","progressbar"),h.style.display="none";const m=e=>{if(e.closest("[data-gumroad-ignore='true']")||e.closest(".gumroad-product-embed"))return;const t=((e,t)=>{var n,r;try{const a=new URL(e);if(!c(a,t))return;const o=new URLSearchParams(window.location.search),s=null!=(n=o.get("affiliate_id"))?n:o.get("a");if(s&&a.searchParams.set("affiliate_id",s),a.searchParams.set("referrer",window.location.href),"gum.co"===a.host)return a;const i=/\/a\/(?<affiliateId>.+)\/(?<permalink>.+)/u.exec(a.pathname);return(null==(r=null==i?void 0:i.groups)?void 0:r.permalink)&&i.groups.affiliateId&&(a.pathname=`/l/${i.groups.permalink}`,a.searchParams.set("affiliate_id",i.groups.affiliateId)),a.pathname.startsWith("/l/")?a:null}catch{return null}})(e.href,d);if(!t)return;"true"===e.dataset.gumroadOverlayCheckout&&t.searchParams.set("wanted","true"),"true"===t.searchParams.get("wanted")?e.href=t.toString():(t.searchParams.set("overlay","true"),e.addEventListener("click",(e=>{e.preventDefault(),h.style.display="",p.src=t.toString()})));const n=document.createElement("span");n.className="logo-full",e.appendChild(n)},y=e=>e.querySelectorAll("a").forEach(m);(e=>{if("complete"===document.readyState)return e();window.addEventListener("load",e)})((()=>{var e;const t=document.createElement("div");t.style.zIndex="999999",t.style.position="absolute";const n=t.attachShadow({mode:"open"}),r=document.createElement("link");r.setAttribute("rel","stylesheet"),r.setAttribute("href",null!=(e=null==l?void 0:l.dataset.stylesUrl)?e:""),r.setAttribute("crossorigin","anonymous"),n.appendChild(r);const a=document.createElement("div");a.className="widget",n.appendChild(a),a.appendChild(h),a.appendChild(u),document.body.appendChild(t),y(document),new MutationObserver((e=>{for(const t of e)t.addedNodes.forEach((e=>{e instanceof HTMLAnchorElement?m(e):e instanceof Element&&y(e)}))})).observe(document,{subtree:!0,childList:!0})})),u.addEventListener("click",(e=>{e.target!==p&&(u.style.display="none",document.body.style.overflow="")})),window.addEventListener("message",(e=>{const t=new URL(e.origin);e.source===p.contentWindow&&c(t,d)&&(s(e.data,[5,[0,"type",[8,"loaded"]]])?(h.style.display="none",document.body.style.overflow="hidden",u.style.display=""):s(e.data,[5,[0,"type",[8,"height"]],[0,"height",1]])?p.style.height=`${e.data.height}px`:s(e.data,[5,[0,"type",[8,"translations"]],[0,"translations",[5,[1,0]]]])&&(f.ariaLabel=e.data.translations.close||""))}))})()})();
//# sourceMappingURL=overlay-f8f9015a9aabefa09736.js.map